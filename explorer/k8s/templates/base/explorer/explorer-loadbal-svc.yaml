apiVersion: v1
kind: Service
metadata:
  name: explorer-loadbal-svc
  namespace: explorer-network
  labels:
    name: explorer-squid-app
    app: explorer-squid-app
spec:
  selector:
    app: explorer-squid-app
  type: LoadBalancer
  sessionAffinity: None
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 10800
  ports:
    - port: 80
      name: nginx
      targetPort: 80
      protocol: TCP
    # - port: 5432
    #   name: db
    #   targetPort: 5432
    #   protocol: TCP
    - port: 3000
      name: processor
      targetPort: 3000
      protocol: TCP
    - port: 4350
      name: graphql
      targetPort: 4000
      protocol: TCP
    - port: 8080
      name: pghealth
      targetPort: 8080
      protocol: TCP
    - port: 7070
      name: processorhealth
      targetPort: 7070
      protocol: TCP
