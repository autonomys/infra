apiVersion: v1
kind: Service
metadata:
  name: archive-loadbal-svc
  namespace: archive-network
  labels:
    name: archive-squid-app
    app: archive-squid-app
spec:
  selector:
    app: archive-squid-app
  type: LoadBalancer
  sessionAffinity: None
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 10800
  ports:
    - port: 80
      name: nginx
      targetPort: 80
      protocol: TCP
    # - port: 5432
    #   name: db
    #   targetPort: 5432
    #   protocol: TCP
    - port: 8888
      name: gateway
      targetPort: 8000
      protocol: TCP
    - port: 4444
      name: explorer
      targetPort: 3000
      protocol: TCP
    - port: 8080
      name: pghealth
      targetPort: 8080
      protocol: TCP
    - port: 7070
      name: ingesthealth
      targetPort: 7070
      protocol: TCP