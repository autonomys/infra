apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ include "archive-squid.fullname" . }}-pvc-snapshot
  namespace: {{ Release.Namespace}}
  labels:
    {{- include "archive-squid.labels" . | nindent 4 }}
    app.kubernetes.io/component: "archive"
    app.kubernetes.io/part-of: "squid-archive"
    app.kubernetes.io/arch: {{.Values.arch}}
    app: {{ include "archive-squid.fullname" . }}
    app: {{ include "archive-squid.fullname" . }}-app
spec:
  dataSource:
    name: {{ include "archive-squid.fullname" . }}-pvc
    kind: VolumeSnapshot
    apiGroup: volumesnapshot.external-storage.k8s.io/v1/volumesnapshots
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 400Gi
  storageClassName: linode-block-storage-retain
# storageClassName: ssd-gp3
